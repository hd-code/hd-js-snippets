"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const worker_threads_1=require("worker_threads");function main(r){let e=0;for(let t=0;t<r.a;t++)for(let t=0;t<r.b;t++)e+=1;return e}class Script{constructor(){this.callback=(()=>{}),this.worker=new worker_threads_1.Worker(__filename),this.worker.on("message",r=>{this.running=!1,this.callback(r)}),this.running=!1}registerCallback(r){this.callback=r}run(r){this.running=!0,this.worker.postMessage(r)}isRunning(){return this.running}delete(){this.worker.terminate()}}function onMessage(r){const e=main(r);null===worker_threads_1.parentPort||void 0===worker_threads_1.parentPort||worker_threads_1.parentPort.postMessage(e)}exports.default=Script,!worker_threads_1.isMainThread&&(null===worker_threads_1.parentPort||void 0===worker_threads_1.parentPort||worker_threads_1.parentPort.on("message",onMessage));